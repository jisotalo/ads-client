<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ads-client | Beckhoff TwinCAT ADS client library for Node.js</title><meta name="description" content="Documentation for ads-client | Beckhoff TwinCAT ADS client library for Node.js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://jisotalo.fi/ads-client/classes/Client.html">Documentation</a><a href="https://jisotalo.fi/ads-client/index.html">README</a><a href="https://github.com/jisotalo/ads-client/discussions">Discussion &amp; Support</a><a href="https://github.com/jisotalo/ads-client/">GitHub</a><a href="https://www.npmjs.com/package/ads-client/">NPM</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ads-client | Beckhoff TwinCAT ADS client library for Node.js</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>ads-client | Beckhoff TwinCAT ADS client library for Node.js</h1></div><div class="tsd-panel tsd-typography"><a id="md:ads-client" class="tsd-anchor"></a><h1 class="tsd-anchor-link">ads-client<a href="#md:ads-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://www.npmjs.org/package/ads-client" target="_blank" class="external"><img src="https://img.shields.io/npm/v/ads-client" alt="npm version"></a>
<a href="https://github.com/jisotalo/ads-client" target="_blank" class="external"><img src="https://img.shields.io/badge/View%20on-GitHub-brightgreen" alt="GitHub"></a>
<a href="https://choosealicense.com/licenses/mit/" target="_blank" class="external"><img src="https://img.shields.io/github/license/jisotalo/ads-client" alt="License"></a></p>
<p>Beckhoff TwinCAT ADS client library for Node.js (unofficial).</p>
<p>Connect to a Beckhoff TwinCAT automation system using the ADS protocol from a Node.js app.</p>
<p>If you are using Node-RED, check out the <a href="https://www.npmjs.com/package/node-red-contrib-ads-client" target="_blank" class="external">node-red-contrib-ads-client</a>.</p>
<p>There is automatically created documentation available at <a href="https://jisotalo.fi/ads-client/" target="_blank" class="external">https://jisotalo.fi/ads-client/</a></p>
<a id="md:project-status" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Project status<a href="#md:project-status" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>14.12.2024 - version 2 released!</p>
<ul>
<li>Rewritten in Typescript</li>
<li>See <a href="https://github.com/jisotalo/ads-client/blob/v2-dev/CHANGELOG.md" target="_blank" class="external">CHANGELOG.md</a> for details.</li>
<li>See <a href="https://github.com/jisotalo/ads-client/blob/v2-dev/MIGRATION.md" target="_blank" class="external">MIGRATION.md</a> for guide of migrating v1 -&gt; v2 (<strong>breaking changes!</strong>)</li>
<li>See the new <a href="https://jisotalo.fi/ads-client/classes/Client.html" target="_blank" class="external">documentation</a></li>
</ul>
<p>See <a href="https://github.com/jisotalo/ads-client/tree/legacy-v1" target="_blank" class="external"><code>legacy-v1</code> branch</a> for previous/legacy version 1.4.4.</p>
<a id="md:features" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Features<a href="#md:features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li>Supports TwinCAT 2 and 3</li>
<li>Supports connecting to the local TwinCAT 3 runtime</li>
<li>Supports any kind of target systems with ADS protocol (local runtime, PLC, EtherCAT I/O...)</li>
<li>Supports multiple connections from the same host</li>
<li>Reading and writing any kind of variables</li>
<li>Subscribing to variable value changes (ADS notifications)</li>
<li>Automatic conversion between PLC and Javascript objects</li>
<li>Calling function block methods (RPC)</li>
<li>Automatic 32/64 bit variable support (PVOID, XINT, etc.)</li>
<li>Automatic byte alignment support (all pack-modes automatically supported)</li>
</ul>
<a id="md:table-of-contents" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Table of contents<a href="#md:table-of-contents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li><a href="#md:ads-client">ads-client</a></li>
<li><a href="#md:project-status">Project status</a></li>
<li><a href="#md:features">Features</a></li>
<li><a href="#md:table-of-contents">Table of contents</a></li>
<li><a href="#md:support">Support</a></li>
<li><a href="#md:installing">Installing</a></li>
<li><a href="#md:minimal-example-tldr">Minimal example (TLDR)</a></li>
<li><a href="#md:connection-setup">Connection setup</a>
<ul>
<li><a href="#md:setup-1---connect-from-windows">Setup 1 - Connect from Windows</a></li>
<li><a href="#md:setup-2---connect-from-linuxwindows">Setup 2 - Connect from Linux/Windows</a></li>
<li><a href="#md:setup-3---connect-from-any-nodejs-system">Setup 3 - Connect from any Node.js system</a></li>
<li><a href="#md:setup-4---connect-from-local-system">Setup 4 - Connect from local system</a></li>
<li><a href="#md:setup-5---docker-container">Setup 5 - Docker container</a></li>
</ul>
</li>
<li><a href="#md:important">Important</a>
<ul>
<li><a href="#md:enabling-localhost-support-on-twincat-3">Enabling localhost support on TwinCAT 3</a></li>
<li><a href="#md:structured-variables">Structured variables</a></li>
<li><a href="#md:connecting-to-targets-without-a-plc-runtime">Connecting to targets without a PLC runtime</a></li>
<li><a href="#md:differences-when-using-with-twincat-2">Differences when using with TwinCAT 2</a></li>
</ul>
</li>
<li><a href="#md:getting-started">Getting started</a>
<ul>
<li><a href="#md:documentation">Documentation</a></li>
<li><a href="#md:available-methods">Available methods</a></li>
<li><a href="#md:creating-a-client">Creating a client</a></li>
<li><a href="#md:connecting">Connecting</a></li>
<li><a href="#md:reading-values">Reading values</a>
<ul>
<li><a href="#md:reading-any-value">Reading any value</a></li>
<li><a href="#md:reading-raw-data">Reading raw data</a></li>
<li><a href="#md:reading-referencepointer">Reading reference/pointer</a></li>
</ul>
</li>
<li><a href="#md:writing-values">Writing values</a>
<ul>
<li><a href="#md:writing-any-value">Writing any value</a></li>
<li><a href="#md:writing-raw-data">Writing raw data</a></li>
<li><a href="#md:writing-referencepointer">Writing reference/pointer</a></li>
</ul>
</li>
<li><a href="#md:subscribing-to-value-changes">Subscribing to value changes</a>
<ul>
<li><a href="#md:any-value">Any value</a></li>
<li><a href="#md:raw-data">Raw data</a></li>
<li><a href="#md:unsubscribing">Unsubscribing</a></li>
</ul>
</li>
<li><a href="#md:using-variable-handles">Using variable handles</a>
<ul>
<li><a href="#md:reading-a-value-using-a-variable-handle">Reading a value using a variable handle</a></li>
<li><a href="#md:writing-a-value-using-a-variable-handle">Writing a value using a variable handle</a></li>
</ul>
</li>
<li><a href="#md:calling-function-block-rpc-methods">Calling function block RPC methods</a>
<ul>
<li><a href="#md:things-to-note-when-using-rpc-methods">Things to note when using RPC Methods</a></li>
<li><a href="#md:about-examples">About examples</a></li>
<li><a href="#md:rpc-method-with-standard-data-types">RPC method with standard data types</a></li>
<li><a href="#md:rpc-method-with-struct">RPC method with struct</a></li>
</ul>
</li>
<li><a href="#md:converting-data-between-raw-data-and-javascript-objects">Converting data between raw data and Javascript objects</a>
<ul>
<li><a href="#md:converting-a-raw-value-to-a-javascript-object">Converting a raw value to a Javascript object</a></li>
<li><a href="#md:converting-a-javascript-object-to-a-raw-value">Converting a Javascript object to a raw value</a></li>
</ul>
</li>
<li><a href="#md:other-features">Other features</a>
<ul>
<li><a href="#md:ads-sum-commands">ADS sum commands</a></li>
<li><a href="#md:starting-and-stopping-a-plc">Starting and stopping a PLC</a></li>
<li><a href="#md:starting-and-stopping-twincat-system">Starting and stopping TwinCAT system</a></li>
<li><a href="#md:client-events">Client events</a></li>
<li><a href="#md:debugging">Debugging</a></li>
</ul>
</li>
<li><a href="#md:disconnecting">Disconnecting</a></li>
<li><a href="#md:common-issues-and-questions">Common issues and questions</a>
<ul>
<li><a href="#md:there-are-lots-of-connection-issues-and-timeouts">There are lot's of connection issues and timeouts</a></li>
<li><a href="#md:getting-typeerror-do-not-know-how-to-serialize-a-bigint">Getting <code>TypeError: Do not know how to serialize a BigInt</code></a></li>
<li><a href="#md:can-i-connect-from-raspberry-pi-to-twincat">Can I connect from Raspberry Pi to TwinCAT?</a></li>
<li><a href="#md:receiving-ads-error-1808-symbol-not-found-even-when-it-should-be-found">Receiving ADS error 1808 <code>Symbol not found</code> even when it should be found</a></li>
<li><a href="#md:having-timeouts-or-mailbox-is-full-errors">Having timeouts or 'mailbox is full' errors</a></li>
<li><a href="#md:having-problems-to-connect-from-osx-or-raspberry-pi-to-target-plc">Having problems to connect from OSX or Raspberry Pi to target PLC</a></li>
<li><a href="#md:a-data-type-is-not-found-even-when-it-should-be">A data type is not found even when it should be</a></li>
<li><a href="#md:connection-failed---failed-to-set-plc-connection">Connection failed - failed to set PLC connection</a></li>
<li><a href="#md:connection-failed-error-eaddrnotavail">Connection failed (error EADDRNOTAVAIL)</a></li>
<li><a href="#md:problems-running-ads-client-with-docker">Problems running ads-client with docker</a></li>
<li><a href="#md:how-to-connect-to-a-plc-that-is-in-config-mode">How to connect to a PLC that is in CONFIG mode?</a></li>
<li><a href="#md:issues-with-twincat-2-low-end-devices-bk9050-bc9050-etc">Issues with TwinCAT 2 low-end devices (BK9050, BC9050 etc.)</a></li>
</ul>
</li>
<li><a href="#md:external-links">External links</a></li>
<li><a href="#md:library-testing">Library testing</a>
<ul>
<li><a href="#md:twincat-3-tests">TwinCAT 3 tests</a></li>
<li><a href="#md:twincat-2-tests">TwinCAT 2 tests</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#md:license">License</a></li>
</ul>
<a id="md:support" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Support<a href="#md:support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li>Bugs and feature requests:
<ul>
<li><a href="https://github.com/jisotalo/ads-client/issues" target="_blank" class="external">Github Issues</a></li>
</ul>
</li>
<li>Help, support and discussion:
<ul>
<li><a href="https://github.com/jisotalo/ads-client/discussions" target="_blank" class="external">Github Discussions</a></li>
</ul>
</li>
</ul>
<p>If you want to support my work, you can buy me a coffee! Contact for more options.</p>
<p><a href="https://www.buymeacoffee.com/jisotalo" target="_blank"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-blue.png" alt="Buy Me A Coffee" style="height: 60px !important;width: 217px !important;" ></a></p>
<p><a href="https://www.paypal.com/donate/?business=KUWBXXCVGZZME&amp;no_recurring=0&amp;currency_code=EUR" target="_blank" class="external"><img src="https://img.shields.io/badge/Donate-PayPal-yellow" alt="Donate"></a></p>
<p>If you need help with integrating the ads-client, I'm available for coding work with invoicing. Contact for further details.</p>
<a id="md:installing" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Installing<a href="#md:installing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Install the <a href="https://www.npmjs.com/package/ads-client" target="_blank" class="external">npm package</a>:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">ads</span><span class="hl-1">-</span><span class="hl-0">client</span>
</code><button>Copy</button></pre>

<p>Include the module in your code:</p>
<pre><code class="js"><span class="hl-2">//Javascript:</span><br/><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">Client</span><span class="hl-1"> } = </span><span class="hl-5">require</span><span class="hl-1">(</span><span class="hl-6">&#39;ads-client&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Typescript:</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-0">Client</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-6">&#39;ads-client&#39;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p>You can also clone the repository and run <code>npm run build</code>. After that, the library is available at <code>./dist/</code></p>
<a id="md:minimal-example-tldr" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Minimal example (TLDR)<a href="#md:minimal-example-tldr" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This connects to a local PLC runtime, reads a value, writes a value, reads it again and then disconnects. The value is a string and it's located in <code>GVL_Global.StringValue</code>.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">Client</span><span class="hl-1"> } = </span><span class="hl-5">require</span><span class="hl-1">(</span><span class="hl-6">&#39;ads-client&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;localhost&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">851</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-5">then</span><span class="hl-1">(</span><span class="hl-3">async</span><span class="hl-1"> (</span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {   </span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Connected to the </span><span class="hl-3">${</span><span class="hl-0">res</span><span class="hl-9">.</span><span class="hl-0">targetAmsNetId</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Router assigned us AmsNetId </span><span class="hl-3">${</span><span class="hl-0">res</span><span class="hl-9">.</span><span class="hl-0">localAmsNetId</span><span class="hl-3">}</span><span class="hl-6"> and port </span><span class="hl-3">${</span><span class="hl-0">res</span><span class="hl-9">.</span><span class="hl-0">localAdsPort</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-7">try</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">//Reading a value</span><br/><span class="hl-1">      </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">read</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Global.StringValue&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Value read (before):&#39;</span><span class="hl-1">, </span><span class="hl-0">read</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><br/><span class="hl-1">      </span><span class="hl-2">//Writing a value</span><br/><span class="hl-1">      </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Global.StringValue&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;This is a new value&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">//Reading a value</span><br/><span class="hl-1">      </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">read2</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Global.StringValue&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Value read (after):&#39;</span><span class="hl-1">, </span><span class="hl-0">read2</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><br/><span class="hl-1">    } </span><span class="hl-7">catch</span><span class="hl-1"> (</span><span class="hl-0">err</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Something failed:&#39;</span><span class="hl-1">, </span><span class="hl-0">err</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-2">//Disconnecting</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">disconnect</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Disconnected&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  }).</span><span class="hl-5">catch</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Error:&#39;</span><span class="hl-1">, </span><span class="hl-0">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code><button type="button">Copy</button></pre>

<a id="md:connection-setup" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Connection setup<a href="#md:connection-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>The ads-client can be used with multiple system configurations.</p>
<p><img src="https://github.com/jisotalo/ads-client/blob/master/img/connection_setup.png?raw=true" alt="ads-client-setups"></p>
<a id="md:setup-1---connect-from-windows" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Setup 1 - Connect from Windows<a href="#md:setup-1---connect-from-windows" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This is the most common scenario. The client is running on a Windows PC that has TwinCAT Router installed (such as development laptop, Beckhoff IPC/PC, Beckhoff PLC).</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>Client has one of the following installed
<ul>
<li>TwinCAT XAE (dev. environment)</li>
<li>TwinCAT XAR (runtime)</li>
<li><a href="https://www.beckhoff.com/en-en/products/automation/twincat/tc1xxx-twincat-3-base/tc1000.html" target="_blank" class="external">TwinCAT ADS</a></li>
</ul>
</li>
<li>An ADS route is created between the client and the PLC using TwinCAT router</li>
</ul>
<p><strong>Client settings:</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;192.168.1.120.1.1&#39;</span><span class="hl-1">, </span><span class="hl-2">//AmsNetId of the target PLC</span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">851</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:setup-2---connect-from-linuxwindows" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Setup 2 - Connect from Linux/Windows<a href="#md:setup-2---connect-from-linuxwindows" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In this scenario, the client is running on Linux or Windows without TwinCAT Router. The .NET based router can be run separately on the same machine.</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>Client has .NET runtime installed</li>
<li>Client has <a href="https://github.com/Beckhoff/TF6000_ADS_DOTNET_V5_Samples/tree/main/Sources/RouterSamples/AdsRouterConsoleApp" target="_blank" class="external">AdsRouterConsoleApp</a> or similar running</li>
<li>An ADS route is created between the client and the PLC (see <a href="https://github.com/Beckhoff/TF6000_ADS_DOTNET_V5_Samples/tree/main/Sources/RouterSamples/AdsRouterConsoleApp" target="_blank" class="external">AdsRouterConsoleApp</a> docs)</li>
</ul>
<p><strong>Client settings:</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;192.168.1.120.1.1&#39;</span><span class="hl-1">, </span><span class="hl-2">//AmsNetId of the target PLC</span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">851</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:setup-3---connect-from-any-nodejs-system" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Setup 3 - Connect from any Node.js system<a href="#md:setup-3---connect-from-any-nodejs-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In this scenario, the client is running on a machine that has no router running (no TwinCAT router and no 3rd party router). For example, Raspberry Pi without any additional installations.</p>
<p>In this setup, the client directly connects to the PLC and uses its TwinCAT router for communication. Only one simultaneous connection from the client is possible.</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>Target system (PLC) firewall has TCP port 48898 open
<ul>
<li>Windows Firewall might block, make sure Ethernet connection is handled as &quot;private&quot;</li>
</ul>
</li>
<li>Local AmsNetId and ADS port are set manually
<ul>
<li>Used <code>localAmsNetId</code> is not already in use</li>
<li>Used <code>localAdsPort</code> is not already in use</li>
</ul>
</li>
<li>An ADS route is configured to the PLC (see blow)</li>
</ul>
<p><strong>Setting up the route:</strong></p>
<ol>
<li>At the PLC, open <code>C:\TwinCAT\3.1\Target\StaticRoutes.xml</code></li>
<li>Copy paste the following under  <code>&lt;RemoteConnections&gt;</code></li>
</ol>
<pre><code class="xml"><Route>
  <Name>UI</Name>
  <Address>192.168.1.10</Address>
  <NetId>192.168.1.10.1.1</NetId>
  <Type>TCP_IP</Type>
  <Flags>64</Flags>
</Route>
</code><button type="button">Copy</button></pre>

<ol start="3">
<li>Edit <code>Address</code> to IP address of the client (which runs the Node.js app), such as <code>192.168.1.10</code></li>
<li>Edit <code>NetId</code> to any unused AmsNetId address, such as <code>192.168.1.10.1.1</code></li>
<li>Restart PLC</li>
</ol>
<p><strong>Client settings:</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">localAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;192.168.1.10.1.1&#39;</span><span class="hl-1">,  </span><span class="hl-2">//Same as Address in PLC&#39;s StaticRoutes.xml (see above)</span><br/><span class="hl-1">  </span><span class="hl-0">localAdsPort:</span><span class="hl-1"> </span><span class="hl-8">32750</span><span class="hl-1">,                </span><span class="hl-2">//Can be anything that is not used</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;192.168.1.120.1.1&#39;</span><span class="hl-1">,</span><span class="hl-2">//AmsNetId of the target PLC</span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">851</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">routerAddress:</span><span class="hl-1"> </span><span class="hl-6">&#39;192.168.1.120&#39;</span><span class="hl-1">,     </span><span class="hl-2">//PLC IP address</span><br/><span class="hl-1">  </span><span class="hl-0">routerTcpPort:</span><span class="hl-1"> </span><span class="hl-8">48898</span><span class="hl-1">                </span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>See also:</strong></p>
<ul>
<li><a href="https://github.com/jisotalo/ads-client/issues/51#issuecomment-758016428" target="_blank" class="external">Issue #51</a></li>
</ul>
<a id="md:setup-4---connect-from-local-system" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Setup 4 - Connect from local system<a href="#md:setup-4---connect-from-local-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In this scenario, the PLC is running Node.js app locally. For example, the development PC or Beckhoff PLC with a screen for HMI.</p>
<p><strong>Requirements:</strong></p>
<ul>
<li>AMS router TCP loopback enabled (see <a href="#md:enabling-localhost-support">Enabling localhost support</a>)
<ul>
<li>Should be already enabled in TwinCAT versions &gt;= 4024.5.</li>
</ul>
</li>
</ul>
<p><strong>Client settings:</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;127.0.0.1.1.1&#39;</span><span class="hl-1">, </span><span class="hl-2">//or &#39;localhost&#39;</span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">851</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:setup-5---docker-container" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Setup 5 - Docker container<a href="#md:setup-5---docker-container" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It's also possible to run the client in a docker containers, also with a separate router (Linux systems).</p>
<p>I'm available for coding work if you need help with this. See <a href="#md:support">Support</a></p>
<a id="md:important" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Important<a href="#md:important" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:enabling-localhost-support-on-twincat-3" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Enabling localhost support on TwinCAT 3<a href="#md:enabling-localhost-support-on-twincat-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If connecting to the local TwinCAT runtime (Node.js and PLC on the same machine), the ADS router TCP loopback feature has to be enabled.</p>
<p>TwinCAT 4024.5 and newer already have this enabled as default.</p>
<ol>
<li>Open registery edition (<code>regedit</code>)</li>
<li>Navigate to</li>
</ol>
<pre><code><span class="hl-8">32</span><span class="hl-1"> </span><span class="hl-0">bit</span><span class="hl-1"> </span><span class="hl-0">operating</span><span class="hl-1"> </span><span class="hl-10">system</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-4">HKEY_LOCAL_MACHINE</span><span class="hl-1">\</span><span class="hl-4">SOFTWARE</span><span class="hl-1">\</span><span class="hl-0">Beckhoff</span><span class="hl-1">\</span><span class="hl-0">TwinCAT3</span><span class="hl-1">\</span><span class="hl-0">System</span><span class="hl-1">\</span><br/><br/><span class="hl-8">64</span><span class="hl-1"> </span><span class="hl-0">bit</span><span class="hl-1"> </span><span class="hl-0">it</span><span class="hl-1"> </span><span class="hl-0">operating</span><span class="hl-1"> </span><span class="hl-10">system</span><span class="hl-1">:</span><br/><span class="hl-1">  </span><span class="hl-4">HKEY_LOCAL_MACHINE</span><span class="hl-1">\</span><span class="hl-4">SOFTWARE</span><span class="hl-1">\</span><span class="hl-0">WOW6432Node</span><span class="hl-1">\</span><span class="hl-0">Beckhoff</span><span class="hl-1">\</span><span class="hl-0">TwinCAT3</span><span class="hl-1">\</span><span class="hl-0">System</span><span class="hl-1">\</span>
</code><button>Copy</button></pre>

<ol start="3">
<li>Create new DWORD registery named <code>EnableAmsTcpLoopback</code> with value of <code>1</code></li>
<li>Restart</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/13457157/82748398-2640bf00-9daa-11ea-98e5-0032b3537969.png" alt="ads-client-tcp-loopback"></p>
<p>Now you can connect to the localhost using <code>targetAmsNetId</code> address of <code>127.0.0.1.1.1</code> or <code>localhost</code>.</p>
<a id="md:structured-variables" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Structured variables<a href="#md:structured-variables" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When writing structured variables, the object properties are handled case-insensitively. This is because the TwinCAT is case-insensitive.</p>
<p>In practice, it means that the following objects are equal when passed to <code>writevalue()</code> or <code>convertToRaw()</code>:</p>
<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">sometext</span><span class="hl-1">: </span><span class="hl-6">&#39;hello&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">somereal</span><span class="hl-1">: </span><span class="hl-8">3.14</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">SOmeTEXT</span><span class="hl-1">: </span><span class="hl-6">&#39;hello&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">SOMEreal</span><span class="hl-1">: </span><span class="hl-8">3.14</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>If there are multiple properties with the same name (in case-insensitive manner), the client selects probably the first one (the selection is done by <code>Object.find()</code>):</p>
<pre><code class="js"><span class="hl-2">//In this case, probably the first one (sometext) is selected and the SOMEtext is skipped.</span><br/><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">sometext</span><span class="hl-1">: </span><span class="hl-6">&#39;hello&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-10">SOMEtext</span><span class="hl-1">: </span><span class="hl-6">&#39;good day&#39;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:connecting-to-targets-without-a-plc-runtime" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Connecting to targets without a PLC runtime<a href="#md:connecting-to-targets-without-a-plc-runtime" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Usually the <code>ads-client</code> is used to connect to a PLC runtime. Howevever, it's also possible to connect to any device supporting ADS protocol, such as</p>
<ul>
<li>TwinCAT system service</li>
<li>I/O devices (EtherCAT, K-bus etc.)</li>
<li><a href="https://github.com/jisotalo/ads-server" target="_blank" class="external">ads-server</a> instances</li>
</ul>
<p>As default, the client assumes that there should be a PLC runtime. This causes errors with non-PLC systems, as different PLC related things are initialized.</p>
<pre><code><span class="hl-0">Connection</span><span class="hl-1"> </span><span class="hl-0">failed</span><span class="hl-1"> - </span><span class="hl-0">failed</span><span class="hl-1"> </span><span class="hl-0">to</span><span class="hl-1"> </span><span class="hl-0">set</span><span class="hl-1"> </span><span class="hl-4">PLC</span><span class="hl-1"> </span><span class="hl-0">connection</span><span class="hl-1">. </span><span class="hl-0">If</span><span class="hl-1"> </span><span class="hl-0">target</span><span class="hl-1"> </span><span class="hl-0">is</span><span class="hl-1"> </span><span class="hl-0">not</span><span class="hl-1"> </span><span class="hl-4">PLC</span><span class="hl-1"> </span><span class="hl-0">runtime</span><span class="hl-1">, </span><span class="hl-0">use</span><span class="hl-1"> </span><span class="hl-0">setting</span><span class="hl-1"> </span><span class="hl-6">&quot;rawClient&quot;</span><span class="hl-1">. </span><span class="hl-0">If</span><span class="hl-1"> </span><span class="hl-0">system</span><span class="hl-1"> </span><span class="hl-0">is</span><span class="hl-1"> </span><span class="hl-3">in</span><span class="hl-1"> </span><span class="hl-0">config</span><span class="hl-1"> </span><span class="hl-0">mode</span><span class="hl-1"> </span><span class="hl-0">or</span><span class="hl-1"> </span><span class="hl-0">there</span><span class="hl-1"> </span><span class="hl-0">is</span><span class="hl-1"> </span><span class="hl-0">no</span><span class="hl-1"> </span><span class="hl-4">PLC</span><span class="hl-1"> </span><span class="hl-0">software</span><span class="hl-1"> </span><span class="hl-0">yet</span><span class="hl-1">, </span><span class="hl-0">you</span><span class="hl-1"> </span><span class="hl-0">might</span><span class="hl-1"> </span><span class="hl-0">want</span><span class="hl-1"> </span><span class="hl-0">to</span><span class="hl-1"> </span><span class="hl-0">use</span><span class="hl-1"> </span><span class="hl-0">setting</span><span class="hl-1"> </span><span class="hl-6">&quot;allowHalfOpen&quot;</span><span class="hl-1">.</span>
</code><button>Copy</button></pre>

<p>By using the <code>rawClient</code> setting, the client allows raw connections to any ADS supported system.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;192.168.5.131.3.1&#39;</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">1002</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">rawClient:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1"> </span><span class="hl-2">// &lt;-- NOTE</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>Note that when the <code>rawclient</code> setting is set, the client only connects to the target. All other background features, such as monitoring system state, PLC symbol version or connection issues, are not available.</p>
<a id="md:differences-when-using-with-twincat-2" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Differences when using with TwinCAT 2<a href="#md:differences-when-using-with-twincat-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>ADS port for first the PLC runtime is 801 instead of 851</li>
</ul>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">ads</span><span class="hl-1">.</span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;...&#39;</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">801</span><span class="hl-1"> </span><span class="hl-2">//&lt;-- NOTE</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>All variable and data type names are in UPPERCASE</li>
</ul>
<p>This might cause problems if your app is used with both TC2 &amp; TC3 systems.</p>
<p><img src="https://user-images.githubusercontent.com/13457157/86540055-96df0d80-bf0a-11ea-8f94-7e04515213c2.png" alt="image"></p>
<ul>
<li>Global variables are accessed with dot (<code>.</code>) prefix (without the GVL name)</li>
</ul>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readSymbol</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Test.ExampleSTRUCT&#39;</span><span class="hl-1">) </span><span class="hl-2">//TwinCAT 3</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readSymbol</span><span class="hl-1">(</span><span class="hl-6">&#39;.ExampleSTRUCT&#39;</span><span class="hl-1">) </span><span class="hl-2">//TwinCAT 2</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>
<p>ENUMs are always numeric values only</p>
</li>
<li>
<p>Empty structs and function blocks (without members) can't be read</p>
</li>
</ul>
<a id="md:getting-started" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Getting started<a href="#md:getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Documentation<a href="#md:documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The documentation is available at <a href="https://jisotalo.fi/ads-client/classes/Client.html" target="_blank" class="external">https://jisotalo.fi/ads-client</a> and <code>./docs</code> folder.</p>
<p>Examples in the getting started are based on a PLC project from <a href="https://github.com/jisotalo/ads-client-test-plc-project" target="_blank" class="external">https://github.com/jisotalo/ads-client-test-plc-project</a>.</p>
<p>You can use the test PLC project as reference together with the <a href="https://github.com/jisotalo/ads-client/blob/master/test/TC3/ads-client.test.js" target="_blank" class="external">ads-client.test.js</a> to see and try out all available features.</p>
<a id="md:available-methods" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Available methods<a href="#md:available-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Click a method to open it's documentation.</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#cacheDataTypes" target="_blank" class="external"><code>cacheDataTypes()</code></a></td>
<td>Caches all data types from the target PLC runtime.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#cacheSymbols" target="_blank" class="external"><code>cacheSymbols()</code></a></td>
<td>Caches all symbols from the target PLC runtime.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#connect" target="_blank" class="external"><code>connect()</code></a></td>
<td>Connects to the target.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#convertFromRaw" target="_blank" class="external"><code>convertFromRaw()</code></a></td>
<td>Converts raw data to a Javascript object by using the provided data type.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#convertToRaw" target="_blank" class="external"><code>convertToRaw()</code></a></td>
<td>Converts a Javascript object to raw data by using the provided data type.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#createVariableHandle" target="_blank" class="external"><code>createVariableHandle()</code></a></td>
<td>Creates a handle to a variable at the target system by variable path  (such as <code>GVL_Test.ExampleStruct</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#createVariableHandleMulti" target="_blank" class="external"><code>createVariableHandleMulti()</code></a></td>
<td>Sends multiple <code>createVariableHandle()</code> commands in one ADS packet (ADS sum command).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#deleteVariableHandle" target="_blank" class="external"><code>deleteVariableHandle()</code></a></td>
<td>Deletes a variable handle that was previously created using <code>createVariableHandle()</code>.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#deleteVariableHandleMulti" target="_blank" class="external"><code>deleteVariableHandleMulti()</code></a></td>
<td>Sends multiple <code>deleteVariableHandle()</code> commands in one ADS packet (ADS sum command).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#disconnect" target="_blank" class="external"><code>disconnect()</code></a></td>
<td>Disconnects from the target and closes active connection.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#getDataType" target="_blank" class="external"><code>getDataType()</code></a></td>
<td>Returns full data type declaration for requested data type (such as <code>ST_Struct</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#getDataTypes" target="_blank" class="external"><code>getDataTypes()</code></a></td>
<td>Returns all target PLC runtime data types.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#getDefaultPlcObject" target="_blank" class="external"><code>getDefaultPlcObject()</code></a></td>
<td>Returns a default (empty) Javascript object representing provided PLC data type.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#getSymbol" target="_blank" class="external"><code>getSymbol()</code></a></td>
<td>Returns a symbol object for given variable path (such as <code>GVL_Test.ExampleStruct</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#getSymbols" target="_blank" class="external"><code>getSymbols()</code></a></td>
<td>Returns all symbols from the target PLC runtime.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#invokeRpcMethod" target="_blank" class="external"><code>invokeRpcMethod()</code></a></td>
<td>Invokes a function block RPC method on the target system.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readDeviceInfo" target="_blank" class="external"><code>readDeviceInfo()</code></a></td>
<td>Reads target device information.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readPlcRuntimeState" target="_blank" class="external"><code>readPlcRuntimeState()</code></a></td>
<td>Reads target PLC runtime state (<code>Run</code>, <code>Stop</code> etc.)</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readPlcSymbolVersion" target="_blank" class="external"><code>readPlcSymbolVersion()</code></a></td>
<td>Reads target PLC runtime symbol version.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readPlcUploadInfo" target="_blank" class="external"><code>readPlcUploadInfo()</code></a></td>
<td>Reads target PLC runtime upload information.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readRaw" target="_blank" class="external"><code>readRaw()</code></a></td>
<td>Reads raw data from the target system by a raw ADS address (index group, index offset and data length).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readRawByHandle" target="_blank" class="external"><code>readRawByHandle()</code></a></td>
<td>Reads raw data from the target system by a previously created variable handle (acquired using <code>createVariableHandle()</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readRawByPath" target="_blank" class="external"><code>readRawByPath()</code></a></td>
<td>Reads raw data from the target system by variable path (such as <code>GVL_Test.ExampleStruct</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readRawBySymbol" target="_blank" class="external"><code>readRawBySymbol()</code></a></td>
<td>Reads raw data from the target system by a symbol object (acquired using <code>getSymbol()</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readRawMulti" target="_blank" class="external"><code>readRawMulti()</code></a></td>
<td>Sends multiple <code>readRaw()</code> commands in one ADS packet (ADS sum command).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readState" target="_blank" class="external"><code>readState()</code></a></td>
<td>Reads target ADS state.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readTcSystemState" target="_blank" class="external"><code>readTcSystemState()</code></a></td>
<td>Reads target TwinCAT system state from ADS port 10000 (usually <code>Run</code> or <code>Config</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readValue" target="_blank" class="external"><code>readValue()</code></a></td>
<td>Reads variable's value from the target system by a variable path (such as <code>GVL_Test.ExampleStruct</code>) and returns the value as a Javascript object.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readValueBySymbol" target="_blank" class="external"><code>readValueBySymbol()</code></a></td>
<td>Reads variable's value from the target system by a symbol object (acquired using <code>getSymbol()</code>) and returns the value as a Javascript object.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readWriteRaw" target="_blank" class="external"><code>readWriteRaw()</code></a></td>
<td>Writes raw data to the target system by a raw ADS address (index group, index offset) and reads the result as raw data.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#readWriteRawMulti" target="_blank" class="external"><code>readWriteRawMulti()</code></a></td>
<td>Sends multiple <code>readWriteRaw()</code> commands in one ADS packet (ADS sum command).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#reconnect" target="_blank" class="external"><code>reconnect()</code></a></td>
<td>Reconnects to the target (disconnects and then connects again).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#resetPlc" target="_blank" class="external"><code>resetPlc()</code></a></td>
<td>Resets the target PLC runtime. Same as reset cold in TwinCAT XAE.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#restartPlc" target="_blank" class="external"><code>restartPlc()</code></a></td>
<td>Restarts the PLC runtime. Same as calling <code>resetPlc()</code> and then <code>startPlc()</code>.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#restartTcSystem" target="_blank" class="external"><code>restartTcSystem()</code></a></td>
<td>Restarts the target TwinCAT system.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#sendAdsCommand" target="_blank" class="external"><code>sendAdsCommand()</code></a></td>
<td>Sends a raw ADS command to the target.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#sendAdsCommandWithFallback" target="_blank" class="external"><code>sendAdsCommandWithFallback()</code></a></td>
<td>Sends a raw ADS command to the target. If it fails to specific ADS error codes, sends the fallback ADS command.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#setDebugLevel" target="_blank" class="external"><code>setDebugLevel()</code></a></td>
<td>Sets active debug level.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#setTcSystemToConfig" target="_blank" class="external"><code>setTcSystemToConfig()</code></a></td>
<td>Sets the target TwinCAT system to config mode. Same as <code>Restart TwinCAT (Config mode)</code> in TwinCAT XAE.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#setTcSystemToRun" target="_blank" class="external"><code>setTcSystemToRun()</code></a></td>
<td>Sets the target TwinCAT system to run mode. Same as <code>Restart TwinCAT system</code> in TwinCAT XAE.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#startPlc" target="_blank" class="external"><code>startPlc()</code></a></td>
<td>Starts the target PLC runtime. Same as pressing the green play button in TwinCAT XAE.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#stopPlc" target="_blank" class="external"><code>stopPlc()</code></a></td>
<td>Stops the target PLC runtime. Same as pressing the red stop button in TwinCAT XAE.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribe" target="_blank" class="external"><code>subscribe()</code></a></td>
<td>Subscribes to value change notifications (ADS notifications) by variable path (such as <code>GVL_Test.ExampleStruct</code>) or raw ADS address (index group, index offset and data length).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribeRaw" target="_blank" class="external"><code>subscribeRaw()</code></a></td>
<td>Subscribes to raw value change notifications (ADS notifications) by a raw ADS address (index group, index offset and data length).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribeValue" target="_blank" class="external"><code>subscribeValue()</code></a></td>
<td>Subscribes to value change notifications (ADS notifications) by a variable path, such as <code>GVL_Test.ExampleStruct</code>.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#unsubscribe" target="_blank" class="external"><code>unsubscribe()</code></a></td>
<td>Unsubscribes a subscription (deletes ADS notification).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#unsubscribeAll" target="_blank" class="external"><code>unsubscribeAll()</code></a></td>
<td>Unsubscribes all active subscription (deletes all ADS notifications).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeControl" target="_blank" class="external"><code>writeControl()</code></a></td>
<td>Sends an ADS <code>WriteControl</code> command to the target.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRaw" target="_blank" class="external"><code>writeRaw()</code></a></td>
<td>Writes raw data to the target system by a raw ADS address (index group, index offset and data length).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRawByHandle" target="_blank" class="external"><code>writeRawByHandle()</code></a></td>
<td>Writes raw data to the target system by a previously created variable handle (acquired using <code>createVariableHandle()</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRawByPath" target="_blank" class="external"><code>writeRawByPath()</code></a></td>
<td>Writes raw data to the target system by variable path (such as <code>GVL_Test.ExampleStruct</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRawBySymbol" target="_blank" class="external"><code>writeRawBySymbol()</code></a></td>
<td>Writes raw data to the target system by a symbol object (acquired using <code>getSymbol()</code>).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRawMulti" target="_blank" class="external"><code>writeRawMulti()</code></a></td>
<td>Sends multiple <code>writeRaw()</code> commands in one ADS packet (ADS sum command).</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeValue" target="_blank" class="external"><code>writeValue()</code></a></td>
<td>Writes variable's value to the target system by a variable path (such as <code>GVL_Test.ExampleStruct</code>). Converts the value from a Javascript object to a raw value.</td>
</tr>
<tr>
<td><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeValueBySymbol" target="_blank" class="external"><code>writeValueBySymbol()</code></a></td>
<td>Writes variable's value to the target system by a symbol object (acquired using <code>getSymbol()</code>). Converts the value from a Javascript object to a raw value.</td>
</tr>
</tbody>
</table>
<a id="md:creating-a-client" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Creating a client<a href="#md:creating-a-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Settings are passed via the <a href="https://jisotalo.fi/ads-client/classes/Client.html" target="_blank" class="external"><code>Client</code></a> constructor. The following settings are mandatory:</p>
<ul>
<li><a href="https://jisotalo.fi/ads-client/interfaces/AdsClientSettings.html#targetAmsNetId" target="_blank" class="external"><code>targetAmsNetId</code></a> - Target runtime AmsNetId</li>
<li><a href="https://jisotalo.fi/ads-client/interfaces/AdsClientSettings.html#targetAdsPort" target="_blank" class="external"><code>targetAdsPort</code></a> - Target runtime ADS port</li>
</ul>
<p>See other settings from the <a href="https://jisotalo.fi/ads-client/interfaces/AdsClientSettings.html" target="_blank" class="external"><code>AdsClientSettings</code> documentation</a>.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&quot;localhost&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">851</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:connecting" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Connecting<a href="#md:connecting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>It's a good practice to start a connection at startup and keep it open until the app is closed.
If there are connection issues or the PLC software is updated, the client will handle everything automatically.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> { </span><span class="hl-4">Client</span><span class="hl-1"> } = </span><span class="hl-5">require</span><span class="hl-1">(</span><span class="hl-6">&#39;ads-client&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">client</span><span class="hl-1"> = </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Client</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">targetAmsNetId:</span><span class="hl-1"> </span><span class="hl-6">&#39;localhost&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">targetAdsPort:</span><span class="hl-1"> </span><span class="hl-8">851</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">connect</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-5">then</span><span class="hl-1">(</span><span class="hl-3">async</span><span class="hl-1"> (</span><span class="hl-0">res</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {   </span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Connected to the </span><span class="hl-3">${</span><span class="hl-0">res</span><span class="hl-9">.</span><span class="hl-0">targetAmsNetId</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Router assigned us AmsNetId </span><span class="hl-3">${</span><span class="hl-0">res</span><span class="hl-9">.</span><span class="hl-0">localAmsNetId</span><span class="hl-3">}</span><span class="hl-6"> and port </span><span class="hl-3">${</span><span class="hl-0">res</span><span class="hl-9">.</span><span class="hl-0">localAdsPort</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">//Connected</span><br/><br/><span class="hl-1">    </span><span class="hl-2">//...</span><br/><br/><span class="hl-1">    </span><span class="hl-2">//Disconnecting</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">disconnect</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  }).</span><span class="hl-5">catch</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Error:&#39;</span><span class="hl-1">, </span><span class="hl-0">err</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code><button type="button">Copy</button></pre>

<a id="md:reading-values" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Reading values<a href="#md:reading-values" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:reading-any-value" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Reading any value<a href="#md:reading-any-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#readValue" target="_blank" class="external"><code>readValue()</code></a> to read any PLC value.</p>
<p>The only exception is the dereferenced value of a reference/pointer, see <a href="#md:reading-referencepointer">Reading reference/pointer</a>.</p>
<p><strong>Reading INT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.StandardTypes.INT_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">// 32767</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading STRING</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.StandardTypes.STRING_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">// A test string ääöö!!@@</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading DT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.StandardTypes.DT_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">// 2106-02-06T06:28:15.000Z (Date object)</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading STRUCT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.STRUCT_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">/* </span><br/><span class="hl-2">{</span><br/><span class="hl-2">  BOOL_: true,</span><br/><span class="hl-2">  BOOL_2: false,</span><br/><span class="hl-2">  BYTE_: 255,</span><br/><span class="hl-2">  WORD_: 65535,</span><br/><span class="hl-2">  //...and so on</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading FUNCTION_BLOCK</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.BLOCK_2&#39;</span><span class="hl-1">); </span><span class="hl-2">//TON</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">// { IN: false, PT: 2500, Q: false, ET: 0, M: false, StartTime: 0 }</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading ARRAY</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.StandardArrays.REAL_3&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">// [ 75483.546875, 0, -75483.546875 ]</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading ENUM</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.ENUM_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">// { name: &#39;Running&#39;, value: 100 }</span>
</code><button type="button">Copy</button></pre>

<p><strong>Typescript example: Reading INT</strong></p>
<pre><code class="ts"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">&lt;</span><span class="hl-11">number</span><span class="hl-1">&gt;(</span><span class="hl-6">&#39;GVL_Read.StandardTypes.INT_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><span class="hl-2">//res.value is typed as number</span><br/><span class="hl-2">// 32767</span>
</code><button type="button">Copy</button></pre>

<p><strong>Typescript example: Reading STRUCT</strong></p>
<pre><code class="ts"><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-11">ST_ComplexTypes</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_</span><span class="hl-1">: </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_2</span><span class="hl-1">: </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BYTE_</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">//..and so on</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readValue</span><span class="hl-1">&lt;</span><span class="hl-11">ST_ComplexTypes</span><span class="hl-1">&gt;(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.STRUCT_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><span class="hl-2">//res.value is typed as ST_ComplexTypes</span><br/><span class="hl-2">/* </span><br/><span class="hl-2">{</span><br/><span class="hl-2">  BOOL_: true,</span><br/><span class="hl-2">  BOOL_2: false,</span><br/><span class="hl-2">  BYTE_: 255,</span><br/><span class="hl-2">  WORD_: 65535,</span><br/><span class="hl-2">  //..and so on</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<a id="md:reading-raw-data" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Reading raw data<a href="#md:reading-raw-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#readRaw" target="_blank" class="external"><code>readRaw()</code></a> or <a href="https://jisotalo.fi/ads-client/classes/Client.html#readRawByPath" target="_blank" class="external"><code>readRawByPath()</code></a> to read any PLC value as raw data. The raw data in this context means received bytes (a <code>Buffer</code> object).</p>
<p>The only exception is the dereferenced value of a reference/pointer, see <a href="#md:reading-referencepointer">Reading reference/pointer</a>.</p>
<p>For converting the data between raw data and Javascript object, see <a href="#md:converting-data-between-raw-data-and-javascript-objects">Converting data between raw data and Javascript objects</a>.</p>
<p><strong>readRaw()</strong></p>
<p>The <code>indexGroup</code> and <code>indexOffset</code> can be acquired by using <a href="https://jisotalo.fi/ads-client/classes/Client.html#getSymbol" target="_blank" class="external"><code>getSymbol()</code></a>.</p>
<pre><code class="js"><span class="hl-2">//Read 2 bytes from indexGroup 16448 and indexOffset 414816</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRaw</span><span class="hl-1">(</span><span class="hl-8">16448</span><span class="hl-1">, </span><span class="hl-8">414816</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ff 7f&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>readRawByPath()</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRawByPath</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.StandardTypes.INT_&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ff 7f&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="md:reading-referencepointer" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Reading reference/pointer<a href="#md:reading-referencepointer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The dereferenced value of a reference (<code>REFERENCE TO</code>) or a pointer (<code>POINTER TO</code>)  can be read with <a href="https://jisotalo.fi/ads-client/classes/Client.html#readRawByPath" target="_blank" class="external"><code>readRawByPath()</code></a> or by using <a href="https://jisotalo.fi/ads-client/classes/Client.html#createVariableHandle" target="_blank" class="external">variable handles</a>.</p>
<p><strong>Reading POINTER (readRawByPath())</strong></p>
<pre><code class="js"><span class="hl-2">//Reading a raw POINTER value (Note the dereference operator ^)</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRawByPath</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.POINTER_^&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Converting to a Javascript object</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertFromRaw</span><span class="hl-1">(</span><span class="hl-0">rawValue</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">);</span><br/><span class="hl-2">/* </span><br/><span class="hl-2">{</span><br/><span class="hl-2">  BOOL_: true,</span><br/><span class="hl-2">  BOOL_2: false,</span><br/><span class="hl-2">  BYTE_: 255,</span><br/><span class="hl-2">  WORD_: 65535,</span><br/><span class="hl-2">  //..and so on</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading REFERENCE (readRawByPath())</strong></p>
<pre><code class="js"><span class="hl-2">//Reading a raw REFERENCE value</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">rawValue</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRawByPath</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.REFERENCE_&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Converting to a Javascript object</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertFromRaw</span><span class="hl-1">(</span><span class="hl-0">rawValue</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">);</span><br/><span class="hl-2">/* </span><br/><span class="hl-2">{</span><br/><span class="hl-2">  BOOL_: true,</span><br/><span class="hl-2">  BOOL_2: false,</span><br/><span class="hl-2">  BYTE_: 255,</span><br/><span class="hl-2">  WORD_: 65535,</span><br/><span class="hl-2">  //..and so on</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading POINTER (variable handle)</strong></p>
<pre><code class="js"><span class="hl-2">//Reading a POINTER value (Note the dereference operator ^)</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">handle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">createVariableHandle</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.POINTER_^&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">rawValue</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRawByHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">deleteVariableHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Converting to a Javascript object</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertFromRaw</span><span class="hl-1">(</span><span class="hl-0">rawValue</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">);</span><br/><span class="hl-2">/* </span><br/><span class="hl-2">{</span><br/><span class="hl-2">  BOOL_: true,</span><br/><span class="hl-2">  BOOL_2: false,</span><br/><span class="hl-2">  BYTE_: 255,</span><br/><span class="hl-2">  WORD_: 65535,</span><br/><span class="hl-2">  //..and so on</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<p><strong>Reading REFERENCE (variable handle)</strong></p>
<pre><code class="js"><span class="hl-2">//Reading a REFERENCE value</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">handle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">createVariableHandle</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.ComplexTypes.REFERENCE_&#39;</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">rawValue</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRawByHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">deleteVariableHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Converting to a Javascript object</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertFromRaw</span><span class="hl-1">(</span><span class="hl-0">rawValue</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">);</span><br/><span class="hl-2">/* </span><br/><span class="hl-2">{</span><br/><span class="hl-2">  BOOL_: true,</span><br/><span class="hl-2">  BOOL_2: false,</span><br/><span class="hl-2">  BYTE_: 255,</span><br/><span class="hl-2">  WORD_: 65535,</span><br/><span class="hl-2">  //..and so on</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<a id="md:writing-values" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Writing values<a href="#md:writing-values" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:writing-any-value" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Writing any value<a href="#md:writing-any-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#writeValue" target="_blank" class="external"><code>writeValue()</code></a> to write any PLC value.</p>
<p>The only exception is the dereferenced value of a reference/pointer, see <a href="#md:writing-referencepointer">Writing reference/pointer</a>.</p>
<p><strong>Writing INT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.StandardTypes.INT_&#39;</span><span class="hl-1">, </span><span class="hl-8">32767</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">.</span><span class="hl-0">value</span><span class="hl-1">); </span><br/><span class="hl-2">// 32767</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing STRING</strong></p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.StandardTypes.STRING_&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;This is a test&#39;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing DT</strong></p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.StandardTypes.DT_&#39;</span><span class="hl-1">, </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Date</span><span class="hl-1">());</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing STRUCT (all properties)</strong></p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.STRUCT_&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_2:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BYTE_:</span><span class="hl-1"> </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">//...and so on</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing STRUCT (some properties only)</strong></p>
<p>All other properties will keep their values. The client reads the active value first and then makes changes.</p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.STRUCT_&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><br/><span class="hl-1">}, </span><span class="hl-3">true</span><span class="hl-1">); </span><span class="hl-2">//&lt;-- NOTE: autoFill set</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing FUNCTION_BLOCK (all properties)</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">timerBlock</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">IN:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-0">PT:</span><span class="hl-1"> </span><span class="hl-8">2500</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-0">Q:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-0">ET:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-0">M:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-0">StartTime:</span><span class="hl-1"> </span><span class="hl-8">0</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.BLOCK_2&#39;</span><span class="hl-1">, </span><span class="hl-0">timerBlock</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing FUNCTION_BLOCK (some properties only)</strong></p>
<p>All other properties will keep their values. The client reads the active value first and then makes changes.</p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.BLOCK_2&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">IN:</span><span class="hl-1"> </span><span class="hl-3">true</span><br/><span class="hl-1">}, </span><span class="hl-3">true</span><span class="hl-1">); </span><span class="hl-2">//&lt;-- NOTE: autoFill set</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing ARRAY</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = [</span><br/><span class="hl-1">  </span><span class="hl-8">75483.546875</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-8">0</span><span class="hl-1">, </span><br/><span class="hl-1">  -</span><span class="hl-8">75483.546875</span><br/><span class="hl-1">];</span><br/><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.StandardArrays.REAL_3&#39;</span><span class="hl-1">, </span><span class="hl-0">data</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing ENUM</strong></p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.ENUM_&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Running&#39;</span><span class="hl-1">);</span><br/><span class="hl-2">//...or...</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeValue</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.ENUM_&#39;</span><span class="hl-1">, </span><span class="hl-8">100</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:writing-raw-data" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Writing raw data<a href="#md:writing-raw-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRaw" target="_blank" class="external"><code>writeRaw()</code></a> or <a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRawByPath" target="_blank" class="external"><code>writeRawByPath()</code></a> to write any PLC value using raw data. The raw data in this context means bytes (a <code>Buffer</code> object).</p>
<p>The only exception is the dereferenced value of a reference/pointer, see <a href="#md:reading-referencepointer">Reading reference/pointer</a>.</p>
<p>For converting the data between raw data and Javascript object, see <a href="#md:converting-data-between-raw-data-and-javascript-objects">Converting data between raw data and Javascript objects</a>.</p>
<p><strong>writeRaw()</strong></p>
<pre><code class="js"><span class="hl-2">//Creating raw data of an INT</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-8">32767</span><span class="hl-1">, </span><span class="hl-6">&#39;INT&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ff 7f&gt;</span><br/><br/><span class="hl-2">//Writing the value to indexGroup 16448 and indexOffset 414816</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeRaw</span><span class="hl-1">(</span><span class="hl-8">16448</span><span class="hl-1">, </span><span class="hl-8">414816</span><span class="hl-1">, </span><span class="hl-0">data</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>writeRawByPath()</strong></p>
<pre><code class="js"><span class="hl-2">//Creating raw data of an INT</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-8">32767</span><span class="hl-1">, </span><span class="hl-6">&#39;INT&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ff 7f&gt;</span><br/><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeRawByPath</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.StandardTypes.INT_&#39;</span><span class="hl-1">, </span><span class="hl-0">data</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:writing-referencepointer" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Writing reference/pointer<a href="#md:writing-referencepointer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The dereferenced value of a reference (<code>REFERENCE TO</code>) or a pointer (<code>POINTER TO</code>) can be written
with <a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRawByPath" target="_blank" class="external"><code>writeRawByPath()</code></a> or by using <a href="https://jisotalo.fi/ads-client/classes/Client.html#createVariableHandle" target="_blank" class="external">variable handles</a>.</p>
<p><strong>Writing POINTER (writeRawByPath())</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_2:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BYTE_:</span><span class="hl-1"> </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">//...and so on</span><br/><span class="hl-1">};</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">rawValue</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Writing a raw POINTER value (Note the dereference operator ^)</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeRawByPath</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.POINTER_^&#39;</span><span class="hl-1">, </span><span class="hl-0">rawValue</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing REFERENCE (writeRawByPath())</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_2:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BYTE_:</span><span class="hl-1"> </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">//...and so on</span><br/><span class="hl-1">};</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">rawValue</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Writing a raw REFERENCE value</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeRawByPath</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.REFERENCE_&#39;</span><span class="hl-1">, </span><span class="hl-0">rawValue</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing POINTER (variable handle)</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_2:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BYTE_:</span><span class="hl-1"> </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">//...and so on</span><br/><span class="hl-1">};</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">rawValue</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Writing a raw POINTER value (Note the dereference operator ^)</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">handle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">createVariableHandle</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.POINTER_^&#39;</span><span class="hl-1">);</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeRawByHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">, </span><span class="hl-0">rawValue</span><span class="hl-1">);</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">deleteVariableHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Writing REFERENCE (variable handle)</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_2:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BYTE_:</span><span class="hl-1"> </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">//...and so on</span><br/><span class="hl-1">};</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">rawValue</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Writing a raw REFERENCE value</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">handle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">createVariableHandle</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.ComplexTypes.POINTER_&#39;</span><span class="hl-1">);</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeRawByHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">, </span><span class="hl-0">rawValue</span><span class="hl-1">);</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">deleteVariableHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:subscribing-to-value-changes" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Subscribing to value changes<a href="#md:subscribing-to-value-changes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In ads-client, subscriptions are used to handle ADS notifications. ADS notifications are data sent by PLC automatically without request. For example, the latest value of a variable every second.</p>
<p>By subscribing to a variable value changes, the target system (PLC) will send ADS notifications when the value changes (or every x milliseconds). The client then receives these notifications and calls the user callback function with the latest value.</p>
<p>More information about ADS notifications at <a href="https://infosys.beckhoff.com/content/1033/tc3_ads.net/9407523595.html?id=431879546285476216" target="_blank" class="external">Beckhoff Infosys: Use of ADS Notifications</a>.</p>
<a id="md:any-value" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Any value<a href="#md:any-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribeValue" target="_blank" class="external"><code>subscribeValue()</code></a> or <a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribe" target="_blank" class="external"><code>subscribe()</code></a> to subscribe to PLC variable value changes.</p>
<p><strong>Example</strong></p>
<p>Subscribing to changes of <code>GVL_Subscription.NumericValue_10ms</code>. The callback is called when the PLC value changes (at maximum every 100 milliseconds).</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">onValueChanged</span><span class="hl-1"> = (</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-0">subscription</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Value of </span><span class="hl-3">${</span><span class="hl-0">subscription</span><span class="hl-9">.</span><span class="hl-0">symbol</span><span class="hl-9">.</span><span class="hl-0">name</span><span class="hl-3">}</span><span class="hl-6"> has changed: </span><span class="hl-3">${</span><span class="hl-0">data</span><span class="hl-9">.</span><span class="hl-0">value</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">subscription</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">subscribeValue</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-6">&#39;GVL_Subscription.NumericValue_10ms&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">onValueChanged</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">100</span><span class="hl-1"> </span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Example</strong></p>
<p>Subscribing to value of <code>GVL_Subscription.NumericValue_1000ms</code>. The callback is called with the latest value every 100 milliseconds (doesn't matter if the value has changed or not).</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">onValueReceived</span><span class="hl-1"> = (</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-0">subscription</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Value of </span><span class="hl-3">${</span><span class="hl-0">subscription</span><span class="hl-9">.</span><span class="hl-0">symbol</span><span class="hl-9">.</span><span class="hl-0">name</span><span class="hl-3">}</span><span class="hl-6"> is: </span><span class="hl-3">${</span><span class="hl-0">data</span><span class="hl-9">.</span><span class="hl-0">value</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">subscription</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">subscribeValue</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-6">&#39;GVL_Subscription.NumericValue_1000ms&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">onValueReceived</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-8">100</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">false</span><span class="hl-1"> </span><br/><span class="hl-1">);</span><br/>
</code><button type="button">Copy</button></pre>

<p><strong>Typescript example</strong></p>
<p>Same as previous example, but with <a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribe" target="_blank" class="external"><code>subscribe()</code></a> instead. A type can be provided for <code>subscribeValue&lt;T&gt;()</code> as well.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">subscription</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">subscribe</span><span class="hl-1">&lt;</span><span class="hl-11">number</span><span class="hl-1">&gt;({</span><br/><span class="hl-1">  </span><span class="hl-0">target:</span><span class="hl-1"> </span><span class="hl-6">&#39;GVL_Subscription.NumericValue_1000ms&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">callback</span><span class="hl-0">:</span><span class="hl-1"> (</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-0">subscription</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">//data.value is typed as &quot;number&quot; instead of &quot;any&quot;</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Value of </span><span class="hl-3">${</span><span class="hl-0">subscription</span><span class="hl-9">.</span><span class="hl-0">symbol</span><span class="hl-9">.</span><span class="hl-0">name</span><span class="hl-3">}</span><span class="hl-6"> is: </span><span class="hl-3">${</span><span class="hl-0">data</span><span class="hl-9">.</span><span class="hl-0">value</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">cycleTime:</span><span class="hl-1"> </span><span class="hl-8">100</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">sendOnChange:</span><span class="hl-1"> </span><span class="hl-3">false</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:raw-data" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Raw data<a href="#md:raw-data" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribeRaw" target="_blank" class="external"><code>subscribeRaw()</code></a> or <a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribe" target="_blank" class="external"><code>subscribe()</code></a> to subscribe to raw value changes.</p>
<p>The <code>indexGroup</code> and <code>indexOffset</code> can be acquired by using <a href="https://jisotalo.fi/ads-client/classes/Client.html#getSymbol" target="_blank" class="external"><code>getSymbol()</code></a>.</p>
<p><strong>Example</strong></p>
<p>Subscribing to raw address of <code>indexGroup</code> = 16448 and <code>indexOffset</code> = 414816 (2 bytes).</p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">subscribeRaw</span><span class="hl-1">(</span><span class="hl-8">16448</span><span class="hl-1">, </span><span class="hl-8">414816</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">, (</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-0">subscription</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Value has changed: </span><span class="hl-3">${</span><span class="hl-0">data</span><span class="hl-9">.</span><span class="hl-0">value</span><span class="hl-9">.</span><span class="hl-5">toString</span><span class="hl-9">(</span><span class="hl-6">&#39;hex&#39;</span><span class="hl-9">)</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">}, </span><span class="hl-8">100</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Example</strong></p>
<p>Same as previous example, but with <a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribe" target="_blank" class="external"><code>subscribe()</code></a> instead.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">onValueChanged</span><span class="hl-1"> = (</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-0">subscription</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">`Value has changed: </span><span class="hl-3">${</span><span class="hl-0">data</span><span class="hl-9">.</span><span class="hl-0">value</span><span class="hl-9">.</span><span class="hl-5">toString</span><span class="hl-9">(</span><span class="hl-6">&#39;hex&#39;</span><span class="hl-9">)</span><span class="hl-3">}</span><span class="hl-6">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">subscribe</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">target:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">indexGroup:</span><span class="hl-1"> </span><span class="hl-8">16448</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">indexOffset:</span><span class="hl-1"> </span><span class="hl-8">414816</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">size:</span><span class="hl-1"> </span><span class="hl-8">2</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">callback:</span><span class="hl-1"> </span><span class="hl-0">onValueChanged</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">cycleTime:</span><span class="hl-1"> </span><span class="hl-8">100</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:unsubscribing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Unsubscribing<a href="#md:unsubscribing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscriptions should always be cancelled when no longer needed (to save PLC resources).</p>
<p>To unsubscribe, use <a href="https://jisotalo.fi/ads-client/classes/Client.html#unsubscribe" target="_blank" class="external"><code>unsubscribe()</code></a> or subscription object's <a href="https://jisotalo.fi/ads-client/interfaces/ActiveSubscription.html#unsubscribe" target="_blank" class="external"><code>ActiveSubscription.unsubscribe()</code></a>.</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">subscription</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">subscribeValue</span><span class="hl-1">(...);</span><br/><br/><span class="hl-2">//Later when no longer needed</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">subscription</span><span class="hl-1">.</span><span class="hl-5">unsubscribe</span><span class="hl-1">();</span><br/><br/><span class="hl-2">//Or alternatively</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">unsubscribe</span><span class="hl-1">(</span><span class="hl-0">subscription</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:using-variable-handles" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Using variable handles<a href="#md:using-variable-handles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Using variable handles is an another way to read and write raw data.</p>
<p>First, a handle is created to a specific PLC variable by the variable path. After that, read and write operations are available.</p>
<p>Handles should always be deleted after no longer needed, as the PLC has limited number of handles.</p>
<p>Handles can also be used to read/write reference and pointer values, see <a href="#md:reading-referencepointer">Reading reference/pointer</a>.</p>
<a id="md:reading-a-value-using-a-variable-handle" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Reading a value using a variable handle<a href="#md:reading-a-value-using-a-variable-handle" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-2">//Creating a handle</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">handle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">createVariableHandle</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Read.StandardTypes.INT_&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Reading a value</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRawByHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Deleting the handle</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">deleteVariableHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Converting to a Javascript value</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">converted</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertFromRaw</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-6">&#39;INT&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ff 7f&gt;</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">converted</span><span class="hl-1">); </span><span class="hl-2">//32767</span>
</code><button type="button">Copy</button></pre>

<a id="md:writing-a-value-using-a-variable-handle" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Writing a value using a variable handle<a href="#md:writing-a-value-using-a-variable-handle" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="js"><span class="hl-2">//Creating a raw value</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-8">32767</span><span class="hl-1">, </span><span class="hl-6">&#39;INT&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ff 7f&gt;</span><br/><br/><span class="hl-2">//Creating a handle</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">handle</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">createVariableHandle</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_Write.StandardTypes.INT_&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Writing the value</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">writeRawByHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">, </span><span class="hl-0">data</span><span class="hl-1">);</span><br/><br/><span class="hl-2">//Deleting the handle</span><br/><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">deleteVariableHandle</span><span class="hl-1">(</span><span class="hl-0">handle</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:calling-function-block-rpc-methods" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Calling function block RPC methods<a href="#md:calling-function-block-rpc-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If a function block method has pragma <code>{attribute 'TcRpcEnable'}</code>,
the method can be called from ads-client.</p>
<p>Read more at <a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_plc_intro/7145472907.html" target="_blank" class="external">Beckhoff Infosys: Attribute 'TcRpcEnable'</a>.</p>
<a id="md:things-to-note-when-using-rpc-methods" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Things to note when using RPC Methods<a href="#md:things-to-note-when-using-rpc-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>These are my own observations.</p>
<ul>
<li>Do not use online change if you change RPC method parameters or return data types</li>
<li>Make sure that parameters and return value have no pack-mode pragmas defined, otherwise data might be corrupted</li>
<li>Do not use <code>ARRAY</code> values directly in parameters or return value, encapsulate arrays inside struct and use the struct instead</li>
<li>The feature isn't well documented by Beckhoff, so there might be some things that aren't taken into account</li>
</ul>
<a id="md:about-examples" class="tsd-anchor"></a><h3 class="tsd-anchor-link">About examples<a href="#md:about-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>These examples use <code>FB_RPC</code> from the test PLC project at <a href="https://github.com/jisotalo/ads-client-test-plc-project" target="_blank" class="external">https://github.com/jisotalo/ads-client-test-plc-project</a>.</p>
<p><img src="https://raw.githubusercontent.com/jisotalo/ads-client/refs/heads/v2-dev/img/fb_rpc.png" alt=""></p>
<p>There is an instance of the function block at <code>GVL_RPC.RpcBlock</code>.</p>
<a id="md:rpc-method-with-standard-data-types" class="tsd-anchor"></a><h3 class="tsd-anchor-link">RPC method with standard data types<a href="#md:rpc-method-with-standard-data-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>Calculator()</code> method calculates sum, product and division of the input values. The method returns <code>true</code>, if all calculations were successful.</p>
<pre><code><span class="hl-1">{</span><span class="hl-0">attribute</span><span class="hl-1"> </span><span class="hl-6">&#39;TcRpcEnable&#39;</span><span class="hl-1">}</span><br/><span class="hl-4">METHOD</span><span class="hl-1"> </span><span class="hl-10">Calculator</span><span class="hl-1"> : </span><span class="hl-4">BOOL</span><br/><span class="hl-4">VAR_INPUT</span><br/><span class="hl-1">	</span><span class="hl-10">Value1</span><span class="hl-1">	: </span><span class="hl-4">REAL</span><span class="hl-1">;</span><br/><span class="hl-1">	</span><span class="hl-10">Value2</span><span class="hl-1">	: </span><span class="hl-4">REAL</span><span class="hl-1">;</span><br/><span class="hl-4">END_VAR</span><br/><span class="hl-4">VAR_OUTPUT</span><br/><span class="hl-1">	</span><span class="hl-10">Sum</span><span class="hl-1">			: </span><span class="hl-4">REAL</span><span class="hl-1">;</span><br/><span class="hl-1">	</span><span class="hl-10">Product</span><span class="hl-1"> 	: </span><span class="hl-4">REAL</span><span class="hl-1">;</span><br/><span class="hl-1">	</span><span class="hl-10">Division</span><span class="hl-1">	: </span><span class="hl-4">REAL</span><span class="hl-1">;</span><br/><span class="hl-4">END_VAR</span><br/><br/><span class="hl-2">//--- Code starts ---</span><br/><br/><span class="hl-2">//Return TRUE if all success</span><br/><span class="hl-10">Calculator</span><span class="hl-1"> := </span><span class="hl-4">TRUE</span><span class="hl-1">;</span><br/><br/><span class="hl-10">Sum</span><span class="hl-1"> := </span><span class="hl-0">Value1</span><span class="hl-1"> + </span><span class="hl-0">Value2</span><span class="hl-1">;</span><br/><span class="hl-10">Product</span><span class="hl-1"> := </span><span class="hl-0">Value1</span><span class="hl-1"> * </span><span class="hl-0">Value2</span><span class="hl-1">;</span><br/><br/><span class="hl-4">IF</span><span class="hl-1"> </span><span class="hl-0">Value2</span><span class="hl-1"> &lt;&gt; </span><span class="hl-8">0</span><span class="hl-1"> </span><span class="hl-4">THEN</span><br/><span class="hl-1">	</span><span class="hl-10">Division</span><span class="hl-1"> := </span><span class="hl-0">Value1</span><span class="hl-1"> / </span><span class="hl-0">Value2</span><span class="hl-1">;</span><br/><span class="hl-4">ELSE</span><br/><span class="hl-1">	</span><span class="hl-10">Division</span><span class="hl-1"> := </span><span class="hl-8">0</span><span class="hl-1">;</span><br/><span class="hl-1">	</span><span class="hl-10">Calculator</span><span class="hl-1"> := </span><span class="hl-4">FALSE</span><span class="hl-1">;</span><br/><span class="hl-4">END_IF</span>
</code><button>Copy</button></pre>

<p>Example call:</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">invokeRpcMethod</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_RPC.RpcBlock&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Calculator&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">Value1:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">Value2:</span><span class="hl-1"> </span><span class="hl-8">123</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">);</span><br/><span class="hl-2">/*</span><br/><span class="hl-2">{</span><br/><span class="hl-2">  returnValue: true,</span><br/><span class="hl-2">  outputs: { </span><br/><span class="hl-2">    Sum: 124, </span><br/><span class="hl-2">    Product: 123, </span><br/><span class="hl-2">    Division: 0.008130080997943878 </span><br/><span class="hl-2">  }</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<a id="md:rpc-method-with-struct" class="tsd-anchor"></a><h3 class="tsd-anchor-link">RPC method with struct<a href="#md:rpc-method-with-struct" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>Structs()</code> method takes a struct value as input, changes its values and then returns the result.</p>
<pre><code><span class="hl-1">{</span><span class="hl-0">attribute</span><span class="hl-1"> </span><span class="hl-6">&#39;TcRpcEnable&#39;</span><span class="hl-1">}</span><br/><span class="hl-4">METHOD</span><span class="hl-1"> </span><span class="hl-10">Structs</span><span class="hl-1"> : </span><span class="hl-0">ST_Struct</span><br/><span class="hl-4">VAR_INPUT</span><br/><span class="hl-1">	</span><span class="hl-10">Input</span><span class="hl-1">	: </span><span class="hl-0">ST_Struct</span><span class="hl-1">;</span><br/><span class="hl-4">END_VAR</span><br/><br/><span class="hl-2">//--- Code starts ---</span><br/><br/><span class="hl-0">Structs</span><span class="hl-1">.</span><span class="hl-0">SomeText</span><span class="hl-1"> := </span><span class="hl-5">CONCAT</span><span class="hl-1">(</span><span class="hl-6">&#39;Response: &#39;</span><span class="hl-1">, </span><span class="hl-0">Input</span><span class="hl-1">.</span><span class="hl-0">SomeText</span><span class="hl-1">);</span><br/><span class="hl-0">Structs</span><span class="hl-1">.</span><span class="hl-0">SomeReal</span><span class="hl-1"> := </span><span class="hl-0">Input</span><span class="hl-1">.</span><span class="hl-0">SomeReal</span><span class="hl-1"> * </span><span class="hl-8">10.0</span><span class="hl-1">;</span><br/><span class="hl-0">Structs</span><span class="hl-1">.</span><span class="hl-0">SomeDate</span><span class="hl-1"> := </span><span class="hl-0">Input</span><span class="hl-1">.</span><span class="hl-0">SomeDate</span><span class="hl-1"> + </span><span class="hl-4">T</span><span class="hl-1">#24</span><span class="hl-4">H</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>

<p>Example call:</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">res</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">invokeRpcMethod</span><span class="hl-1">(</span><span class="hl-6">&#39;GVL_RPC.RpcBlock&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;Structs&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-0">Input:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">SomeText:</span><span class="hl-1"> </span><span class="hl-6">&#39;Hello ads-client&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">SomeReal:</span><span class="hl-1"> </span><span class="hl-8">3.14</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">SomeDate:</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-5">Date</span><span class="hl-1">(</span><span class="hl-6">&#39;2024-12-24T00:00:00.000Z&#39;</span><span class="hl-1">) </span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">res</span><span class="hl-1">);</span><br/><span class="hl-2">/*</span><br/><span class="hl-2">{</span><br/><span class="hl-2">  returnValue: {</span><br/><span class="hl-2">    SomeText: &#39;Response: Hello ads-client&#39;,</span><br/><span class="hl-2">    SomeReal: 31.4,</span><br/><span class="hl-2">    SomeDate: 2024-12-24T01:00:00.000Z</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  outputs: {}</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<a id="md:converting-data-between-raw-data-and-javascript-objects" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Converting data between raw data and Javascript objects<a href="#md:converting-data-between-raw-data-and-javascript-objects" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The raw data in this context means sent or received bytes (a <code>Buffer</code> object).</p>
<p>When using methods such as <a href="https://jisotalo.fi/ads-client/classes/Client.html#readValue" target="_blank" class="external"><code>readValue()</code></a>, <a href="https://jisotalo.fi/ads-client/classes/Client.html#writeValue" target="_blank" class="external"><code>writeValue()</code></a> and <a href="https://jisotalo.fi/ads-client/classes/Client.html#subscribeValue" target="_blank" class="external"><code>subscribeValue()</code></a>,
the client converts data automatically. The conversion can be done manually as well, by using <a href="https://jisotalo.fi/ads-client/classes/Client.html#convertFromRaw" target="_blank" class="external"><code>convertFromRaw()</code></a> and <a href="https://jisotalo.fi/ads-client/classes/Client.html#convertToRaw" target="_blank" class="external"><code>convertToRaw()</code></a>.</p>
<p>See my other library <a href="https://github.com/jisotalo/iec-61131-3" target="_blank" class="external">iec-61131-3</a> for other possibilities to convert data between Javascript and IEC 61131-3 types.</p>
<a id="md:converting-a-raw-value-to-a-javascript-object" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Converting a raw value to a Javascript object<a href="#md:converting-a-raw-value-to-a-javascript-object" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#convertFromRaw" target="_blank" class="external"><code>convertFromRaw()</code></a> to convert raw data to Javascript object.</p>
<p><strong>Converting INT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">readRaw</span><span class="hl-1">(</span><span class="hl-8">16448</span><span class="hl-1">, </span><span class="hl-8">414816</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ff 7f&gt;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">converted</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertFromRaw</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-6">&#39;INT&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">converted</span><span class="hl-1">); </span><span class="hl-2">//32767</span>
</code><button type="button">Copy</button></pre>

<p><strong>Converting STRUCT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">converted</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertFromRaw</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">converted</span><span class="hl-1">);</span><br/><span class="hl-2">/*</span><br/><span class="hl-2">{</span><br/><span class="hl-2">  BOOL_: true,</span><br/><span class="hl-2">  BOOL_2: false,</span><br/><span class="hl-2">  BYTE_: 255,</span><br/><span class="hl-2">  WORD_: 65535,</span><br/><span class="hl-2">  //..and so on</span><br/><span class="hl-2">}</span><br/><span class="hl-2">*/</span>
</code><button type="button">Copy</button></pre>

<a id="md:converting-a-javascript-object-to-a-raw-value" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Converting a Javascript object to a raw value<a href="#md:converting-a-javascript-object-to-a-raw-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#convertToRaw" target="_blank" class="external"><code>convertToRaw()</code></a> to convert Javascript object to raw data.</p>
<p><strong>Converting INT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-8">12345</span><span class="hl-1">, </span><span class="hl-6">&#39;INT&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer 39 30&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Converting STRUCT</strong></p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_:</span><span class="hl-1"> </span><span class="hl-3">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BOOL_2:</span><span class="hl-1"> </span><span class="hl-3">false</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">BYTE_:</span><span class="hl-1"> </span><span class="hl-8">255</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">//...and so on</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ...&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Converting STRUCT (some properties only)</strong></p>
<p>All other (missing) properties are set to default values (zero / empty string).</p>
<pre><code class="js"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">WORD_:</span><span class="hl-1"> </span><span class="hl-8">65535</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">data</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">convertToRaw</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">, </span><span class="hl-6">&#39;ST_StandardTypes&#39;</span><span class="hl-1">, </span><span class="hl-3">true</span><span class="hl-1">); </span><span class="hl-2">//&lt;-- NOTE: autoFill set</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-0">data</span><span class="hl-1">); </span><span class="hl-2">//&lt;Buffer ...&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="md:other-features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Other features<a href="#md:other-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:ads-sum-commands" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ADS sum commands<a href="#md:ads-sum-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>ADS sum commands can be used to have multiple ADS commands in one request. This can be useful for efficiency reasons.</p>
<p>See <a href="https://infosys.beckhoff.com/english.php?content=../content/1033/tc3_adsdll2/9007199379576075.html&amp;id=9180083787138954512" target="_blank" class="external">Beckhoff Information System</a> for more info.</p>
<ul>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#createVariableHandleMulti" target="_blank" class="external"><code>createVariableHandleMulti()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#deleteVariableHandleMulti" target="_blank" class="external"><code>deleteVariableHandleMulti()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#readRawMulti" target="_blank" class="external"><code>readRawMulti()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#writeRawMulti" target="_blank" class="external"><code>writeRawMulti()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#readWriteRawMulti" target="_blank" class="external"><code>readWriteRawMulti()</code></a></li>
</ul>
<a id="md:starting-and-stopping-a-plc" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Starting and stopping a PLC<a href="#md:starting-and-stopping-a-plc" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#startPlc" target="_blank" class="external"><code>startPlc()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#stopPlc" target="_blank" class="external"><code>stopPlc()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#resetPlc" target="_blank" class="external"><code>resetPlc()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#restartPlc" target="_blank" class="external"><code>restartPlc()</code></a></li>
</ul>
<a id="md:starting-and-stopping-twincat-system" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Starting and stopping TwinCAT system<a href="#md:starting-and-stopping-twincat-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#setTcSystemToConfig" target="_blank" class="external"><code>setTcSystemToConfig()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#setTcSystemToRun" target="_blank" class="external"><code>setTcSystemToRun()</code></a></li>
<li><a href="https://jisotalo.fi/ads-client/classes/Client.html#restartTcSystem" target="_blank" class="external"><code>restartTcSystem()</code></a></li>
</ul>
<a id="md:client-events" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Client events<a href="#md:client-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>See <a href="https://jisotalo.fi/ads-client/interfaces/AdsClientEvents.html" target="_blank" class="external"><code>AdsClientEvents</code></a> for all available events, their descriptions and examples.</p>
<pre><code class="js"><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-6">&#39;connect&#39;</span><span class="hl-1">, (</span><span class="hl-0">connection</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Connected:&#39;</span><span class="hl-1">, </span><span class="hl-0">connection</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:debugging" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Debugging<a href="#md:debugging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use <a href="https://jisotalo.fi/ads-client/classes/Client.html#setDebugLevel" target="_blank" class="external"><code>setDebugLevel()</code></a> to change debug level.</p>
<pre><code class="js"><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">setDebugLevel</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>0: no debugging (default)</li>
<li>1: basic debugging (<code>$env:DEBUG='ads-client'</code>)</li>
<li>2: detailed debugging (<code>$env:DEBUG='ads-client,ads-client:details'</code>)</li>
<li>3: detailed debugging with raw I/O data (<code>$env:DEBUG='ads-client,ads-client:details,ads-client:raw-data'</code>)</li>
</ul>
<p>Debug data is available in the console (See <a href="https://www.npmjs.com/package/debug" target="_blank" class="external">Debug</a> library for more).</p>
<a id="md:disconnecting" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Disconnecting<a href="#md:disconnecting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>After the client is no more used, always use <a href="https://jisotalo.fi/ads-client/classes/Client.html#disconnect" target="_blank" class="external"><code>disconnect()</code></a> to release all subscription handles and other resources.</p>
<pre><code class="js"><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-0">client</span><span class="hl-1">.</span><span class="hl-5">disconnect</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<a id="md:common-issues-and-questions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Common issues and questions<a href="#md:common-issues-and-questions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:there-are-lots-of-connection-issues-and-timeouts" class="tsd-anchor"></a><h3 class="tsd-anchor-link">There are lot's of connection issues and timeouts<a href="#md:there-are-lots-of-connection-issues-and-timeouts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Things to try:</p>
<ul>
<li>Remove all TwinCAT routes and create them again (yes, really)</li>
<li>Increase value of <a href="https://jisotalo.fi/ads-client/interfaces/AdsClientSettings.html#timeoutDelay" target="_blank" class="external"><code>timeoutDelay</code></a> setting</li>
<li>Cache all data types and symbols straight after connecting using <a href="https://jisotalo.fi/ads-client/classes/Client.html#cacheDataTypes" target="_blank" class="external"><code>cacheDataTypes</code></a> and <a href="https://jisotalo.fi/ads-client/classes/Client.html#cacheSymbols" target="_blank" class="external"><code>cacheSymbols</code></a></li>
</ul>
<a id="md:getting-typeerror-do-not-know-how-to-serialize-a-bigint" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Getting <code>TypeError: Do not know how to serialize a BigInt</code><a href="#md:getting-typeerror-do-not-know-how-to-serialize-a-bigint" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>JSON.stringify</code> doesn't understand BigInt values (such as <code>LINT</code> or similar 64 bit PLC values)</li>
<li>Check <a href="https://github.com/GoogleChromeLabs/jsbi/issues/30#issuecomment-953187833" target="_blank" class="external">this Github issue</a> for the following patch:</li>
</ul>
<pre><code class="js"><span class="hl-11">BigInt</span><span class="hl-1">.</span><span class="hl-0">prototype</span><span class="hl-1">.</span><span class="hl-5">toJSON</span><span class="hl-1"> = </span><span class="hl-3">function</span><span class="hl-1">() { </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">() }</span>
</code><button type="button">Copy</button></pre>

<a id="md:can-i-connect-from-raspberry-pi-to-twincat" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Can I connect from Raspberry Pi to TwinCAT?<a href="#md:can-i-connect-from-raspberry-pi-to-twincat" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Yes, for example using <a href="#md:setup-3---connect-from-any-nodejs-system">Setup 3 - Connect from any Node.js system</a>.</p>
<ol>
<li>Open a TCP port 48898 from your PLC</li>
<li>Edit <code>StaticRoutes.xml</code> file from your PLC</li>
<li>Connect from the Raspberry Pi using the PLC IP address as <code>routerAddress</code> and the AmsNetID written to <code>StaticRoutes.xml</code> as <code>localAmsNetId</code></li>
</ol>
<a id="md:receiving-ads-error-1808-symbol-not-found-even-when-it-should-be-found" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Receiving ADS error 1808 <code>Symbol not found</code> even when it should be found<a href="#md:receiving-ads-error-1808-symbol-not-found-even-when-it-should-be-found" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Make sure you have updated the latest PLC software using <em>download</em>. Sometimes online change causes this.</li>
<li>If you are using TwinCAT 2, see chapter <a href="#md:differences-when-using-with-twincat-2">Differences when using with TwinCAT 2</a></li>
<li>Double check variable path for typos</li>
</ul>
<a id="md:having-timeouts-or-mailbox-is-full-errors" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Having timeouts or 'mailbox is full' errors<a href="#md:having-timeouts-or-mailbox-is-full-errors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>The AMS router is capable of handling only limited number of requests in a certain time.</li>
<li>Other possible reason is that operating system TCP window is full because of large number of requests.</li>
<li>Solution:
<ul>
<li>Use structs or arrays to send data in larger packets</li>
<li>Try raw commands or sum commands to decrease data usage</li>
</ul>
</li>
</ul>
<a id="md:having-problems-to-connect-from-osx-or-raspberry-pi-to-target-plc" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Having problems to connect from OSX or Raspberry Pi to target PLC<a href="#md:having-problems-to-connect-from-osx-or-raspberry-pi-to-target-plc" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>The local machine has no AMS router</li>
<li>You need to connect to the PLC's AMS router instead</li>
<li>See <a href="https://github.com/jisotalo/ads-client/issues/51#issuecomment-758016428" target="_blank" class="external">this issue comment</a></li>
</ul>
<a id="md:a-data-type-is-not-found-even-when-it-should-be" class="tsd-anchor"></a><h3 class="tsd-anchor-link">A data type is not found even when it should be<a href="#md:a-data-type-is-not-found-even-when-it-should-be" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you use methods like <code>convertFromRaw()</code> and <code>getDataType()</code> but receive an error similar to <code>ClientException: Finding data type *data type* failed</code>, make sure you have really written the data type correctly.</p>
<p>For example, when copying a variable name from TwinCAT online view using CTRL+C, it might not work:</p>
<ul>
<li>Displayed name: <code>ARRAY [0..1, 0..1] OF ST_Example</code></li>
<li>The value copied to clipboard <code>ARRAY [0..1, 0..1] OF ST_Example</code></li>
<li>--&gt; <strong>This causes error!</strong></li>
<li>The real data type name that needs to be used is <code>ARRAY [0..1,0..1] OF ST_Example</code> (note no whitespace between array dimensions)</li>
</ul>
<p>If you have problems, try to read the symbol object using <code>getSymbol()</code>. The final solution is to read all data types using <code>getDataTypes()</code> and manually locate the correct type.</p>
<a id="md:connection-failed---failed-to-set-plc-connection" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Connection failed - failed to set PLC connection<a href="#md:connection-failed---failed-to-set-plc-connection" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>The <code>targetAmsNetId</code> didn't contain a system manager service (port <code>10000</code>)</li>
<li>The target is not a PLC and <code>rawClient</code> setting is not set</li>
<li>Solution:
<ul>
<li>Double-check connection settings</li>
<li><a href="#md:connecting-to-targets-without-a-plc-runtime">Use <code>rawClient</code> setting </a></li>
</ul>
</li>
</ul>
<a id="md:connection-failed-error-eaddrnotavail" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Connection failed (error EADDRNOTAVAIL)<a href="#md:connection-failed-error-eaddrnotavail" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>This could happen if you have manually provided <code>localAddress</code> or <code>localTcpPort</code> that don't exist.
For example, setting <code>localAddress</code> to <code>192.168.10.1</code> when the computer has only ethernet interface with IP <code>192.168.1.1</code>.</p>
<p>See also <a href="https://github.com/jisotalo/ads-client/issues/82" target="_blank" class="external">https://github.com/jisotalo/ads-client/issues/82</a></p>
<a id="md:problems-running-ads-client-with-docker" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Problems running ads-client with docker<a href="#md:problems-running-ads-client-with-docker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>EADDRNOTAVAIL: See above and <a href="https://github.com/jisotalo/ads-client/issues/82" target="_blank" class="external">https://github.com/jisotalo/ads-client/issues/82</a></li>
</ul>
<a id="md:how-to-connect-to-a-plc-that-is-in-config-mode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">How to connect to a PLC that is in CONFIG mode?<a href="#md:how-to-connect-to-a-plc-that-is-in-config-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>As default, the ads-client checks if the target has PLC runtime at given port. However, when target system manager is at config mode, there is none. The client will throw an error during connecting:</p>
<p><code>Connection failed - failed to set PLC connection. If target is not PLC runtime, use setting &quot;rawClient&quot;. If system is in config mode or there is no PLC software yet, you might want to use setting &quot;allowHalfOpen&quot;</code></p>
<p>You can disable the check by providing setting <code>allowHalfOpen: true</code>. After that, it's possible to start the PLC by <code>setTcSystemToRun()</code>.</p>
<p>Another option is to use setting <code>rawClient: true</code> - see <a href="#md:connecting-to-targets-without-a-plc-runtime">Connecting to targets without a PLC runtime</a>.</p>
<a id="md:issues-with-twincat-2-low-end-devices-bk9050-bc9050-etc" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Issues with TwinCAT 2 low-end devices (BK9050, BC9050 etc.)<a href="#md:issues-with-twincat-2-low-end-devices-bk9050-bc9050-etc" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>You can only use raw commands (such as <code>readRaw()</code>, <code>writeRaw()</code>, <code>subscribeRaw()</code>) as these devices provide no symbols</li>
<li>See <a href="https://github.com/jisotalo/ads-client/issues/114" target="_blank" class="external">issue 114</a> and <a href="https://github.com/jisotalo/ads-client/issues/116" target="_blank" class="external">issue 116</a></li>
</ul>
<a id="md:external-links" class="tsd-anchor"></a><h2 class="tsd-anchor-link">External links<a href="#md:external-links" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Description</th>
<th>Link</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADS client for Node-RED</td>
<td><a href="https://github.com/jisotalo/node-red-contrib-ads-client" target="_blank" class="external">https://github.com/jisotalo/node-red-contrib-ads-client</a></td>
</tr>
<tr>
<td>ADS server for Node.js</td>
<td><a href="https://github.com/jisotalo/ads-server" target="_blank" class="external">https://github.com/jisotalo/ads-server</a></td>
</tr>
<tr>
<td>IEC 61131-3 PLC data type helper for Node.js</td>
<td><a href="https://github.com/jisotalo/iec-61131-3/" target="_blank" class="external">https://github.com/jisotalo/iec-61131-3/</a></td>
</tr>
<tr>
<td>Codesys client for Node.js</td>
<td><a href="https://github.com/jisotalo/codesys-client/" target="_blank" class="external">https://github.com/jisotalo/codesys-client/</a></td>
</tr>
</tbody>
</table>
<a id="md:library-testing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Library testing<a href="#md:library-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All features of this library are tested using quite large test suite - see <code>./test/</code> directory.
This prevents regression, thus updating the ads-client should be always safe.</p>
<p>There are separate tests for TwinCAT 2 and TwinCAT 3.</p>
<p>PLC projects for running test suites are located in the following repository:
<a href="https://github.com/jisotalo/ads-client-test-plc-project/tree/v2-dev" target="_blank" class="external">https://github.com/jisotalo/ads-client-test-plc-project/tree/v2-dev</a>.</p>
<a id="md:twincat-3-tests" class="tsd-anchor"></a><h3 class="tsd-anchor-link">TwinCAT 3 tests<a href="#md:twincat-3-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tests are run with command <code>npm run test-tc3</code>. TwinCAT 3 test PLC projects needs to be running in the target system.</p>
<a id="md:twincat-2-tests" class="tsd-anchor"></a><h3 class="tsd-anchor-link">TwinCAT 2 tests<a href="#md:twincat-2-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tests are run with command <code>npm run test-tc2</code>. TwinCAT 2 test PLC projects needs to be running in the target system.</p>
<a id="md:license" class="tsd-anchor"></a><h1 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Licensed under <a href="http://www.opensource.org/licenses/MIT" target="_blank" class="external">MIT License</a>.</p>
<p>Copyright (c) Jussi Isotalo &lt;<a href="mailto:j.isotalo91@gmail.com">j.isotalo91@gmail.com</a>&gt;</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:ads-client"><span>ads-<wbr/>client</span></a><a href="#md:project-status"><span>Project status</span></a><a href="#md:features"><span>Features</span></a><a href="#md:table-of-contents"><span>Table of contents</span></a><a href="#md:support"><span>Support</span></a><a href="#md:installing"><span>Installing</span></a><a href="#md:minimal-example-tldr"><span>Minimal example (TLDR)</span></a><a href="#md:connection-setup"><span>Connection setup</span></a><ul><li><a href="#md:setup-1---connect-from-windows"><span>Setup 1 -<wbr/> <wbr/>Connect from <wbr/>Windows</span></a></li><li><a href="#md:setup-2---connect-from-linuxwindows"><span>Setup 2 -<wbr/> <wbr/>Connect from <wbr/>Linux/<wbr/>Windows</span></a></li><li><a href="#md:setup-3---connect-from-any-nodejs-system"><span>Setup 3 -<wbr/> <wbr/>Connect from any <wbr/>Node.js system</span></a></li><li><a href="#md:setup-4---connect-from-local-system"><span>Setup 4 -<wbr/> <wbr/>Connect from local system</span></a></li><li><a href="#md:setup-5---docker-container"><span>Setup 5 -<wbr/> <wbr/>Docker container</span></a></li></ul><a href="#md:important"><span>Important</span></a><ul><li><a href="#md:enabling-localhost-support-on-twincat-3"><span>Enabling localhost support on <wbr/>TwinCAT 3</span></a></li><li><a href="#md:structured-variables"><span>Structured variables</span></a></li><li><a href="#md:connecting-to-targets-without-a-plc-runtime"><span>Connecting to targets without a PLC runtime</span></a></li><li><a href="#md:differences-when-using-with-twincat-2"><span>Differences when using with <wbr/>TwinCAT 2</span></a></li></ul><a href="#md:getting-started"><span>Getting started</span></a><ul><li><a href="#md:documentation"><span>Documentation</span></a></li><li><a href="#md:available-methods"><span>Available methods</span></a></li><li><a href="#md:creating-a-client"><span>Creating a client</span></a></li><li><a href="#md:connecting"><span>Connecting</span></a></li><li><a href="#md:reading-values"><span>Reading values</span></a></li><li><ul><li><a href="#md:reading-any-value"><span>Reading any value</span></a></li><li><a href="#md:reading-raw-data"><span>Reading raw data</span></a></li><li><a href="#md:reading-referencepointer"><span>Reading reference/pointer</span></a></li></ul></li><li><a href="#md:writing-values"><span>Writing values</span></a></li><li><ul><li><a href="#md:writing-any-value"><span>Writing any value</span></a></li><li><a href="#md:writing-raw-data"><span>Writing raw data</span></a></li><li><a href="#md:writing-referencepointer"><span>Writing reference/pointer</span></a></li></ul></li><li><a href="#md:subscribing-to-value-changes"><span>Subscribing to value changes</span></a></li><li><ul><li><a href="#md:any-value"><span>Any value</span></a></li><li><a href="#md:raw-data"><span>Raw data</span></a></li><li><a href="#md:unsubscribing"><span>Unsubscribing</span></a></li></ul></li><li><a href="#md:using-variable-handles"><span>Using variable handles</span></a></li><li><ul><li><a href="#md:reading-a-value-using-a-variable-handle"><span>Reading a value using a variable handle</span></a></li><li><a href="#md:writing-a-value-using-a-variable-handle"><span>Writing a value using a variable handle</span></a></li></ul></li><li><a href="#md:calling-function-block-rpc-methods"><span>Calling function block RPC methods</span></a></li><li><ul><li><a href="#md:things-to-note-when-using-rpc-methods"><span>Things to note when using RPC <wbr/>Methods</span></a></li><li><a href="#md:about-examples"><span>About examples</span></a></li><li><a href="#md:rpc-method-with-standard-data-types"><span>RPC method with standard data types</span></a></li><li><a href="#md:rpc-method-with-struct"><span>RPC method with struct</span></a></li></ul></li><li><a href="#md:converting-data-between-raw-data-and-javascript-objects"><span>Converting data between raw data and <wbr/>Javascript objects</span></a></li><li><ul><li><a href="#md:converting-a-raw-value-to-a-javascript-object"><span>Converting a raw value to a <wbr/>Javascript object</span></a></li><li><a href="#md:converting-a-javascript-object-to-a-raw-value"><span>Converting a <wbr/>Javascript object to a raw value</span></a></li></ul></li><li><a href="#md:other-features"><span>Other features</span></a></li><li><ul><li><a href="#md:ads-sum-commands"><span>ADS sum commands</span></a></li><li><a href="#md:starting-and-stopping-a-plc"><span>Starting and stopping a PLC</span></a></li><li><a href="#md:starting-and-stopping-twincat-system"><span>Starting and stopping <wbr/>TwinCAT system</span></a></li><li><a href="#md:client-events"><span>Client events</span></a></li><li><a href="#md:debugging"><span>Debugging</span></a></li></ul></li><li><a href="#md:disconnecting"><span>Disconnecting</span></a></li><li><a href="#md:common-issues-and-questions"><span>Common issues and questions</span></a></li><li><ul><li><a href="#md:there-are-lots-of-connection-issues-and-timeouts"><span>There are lot&#39;s of connection issues and timeouts</span></a></li><li><a href="#md:getting-typeerror-do-not-know-how-to-serialize-a-bigint"><span>Getting <wbr/>Type<wbr/>Error: <wbr/>Do not know how to serialize a <wbr/>Big<wbr/>Int</span></a></li><li><a href="#md:can-i-connect-from-raspberry-pi-to-twincat"><span>Can <wbr/>I connect from <wbr/>Raspberry <wbr/>Pi to <wbr/>TwinCAT?</span></a></li><li><a href="#md:receiving-ads-error-1808-symbol-not-found-even-when-it-should-be-found"><span>Receiving ADS error 1808 <wbr/>Symbol not found even when it should be found</span></a></li><li><a href="#md:having-timeouts-or-mailbox-is-full-errors"><span>Having timeouts or &#39;mailbox is full&#39; errors</span></a></li><li><a href="#md:having-problems-to-connect-from-osx-or-raspberry-pi-to-target-plc"><span>Having problems to connect from OSX or <wbr/>Raspberry <wbr/>Pi to target PLC</span></a></li><li><a href="#md:a-data-type-is-not-found-even-when-it-should-be"><span>A data type is not found even when it should be</span></a></li><li><a href="#md:connection-failed---failed-to-set-plc-connection"><span>Connection failed -<wbr/> failed to set PLC connection</span></a></li><li><a href="#md:connection-failed-error-eaddrnotavail"><span>Connection failed (error EADDRNOTAVAIL)</span></a></li><li><a href="#md:problems-running-ads-client-with-docker"><span>Problems running ads-<wbr/>client with docker</span></a></li><li><a href="#md:how-to-connect-to-a-plc-that-is-in-config-mode"><span>How to connect to a PLC that is in CONFIG mode?</span></a></li><li><a href="#md:issues-with-twincat-2-low-end-devices-bk9050-bc9050-etc"><span>Issues with <wbr/>TwinCAT 2 low-<wbr/>end devices (BK9050, BC9050 etc.)</span></a></li></ul></li><li><a href="#md:external-links"><span>External links</span></a></li><li><a href="#md:library-testing"><span>Library testing</span></a></li><li><ul><li><a href="#md:twincat-3-tests"><span>TwinCAT 3 tests</span></a></li><li><a href="#md:twincat-2-tests"><span>TwinCAT 2 tests</span></a></li></ul></li></ul><a href="#md:license"><span>License</span></a></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://jisotalo.fi/ads-client/classes/Client.html" class="tsd-nav-link">Documentation</a><a href="https://jisotalo.fi/ads-client/index.html" class="tsd-nav-link">README</a><a href="https://github.com/jisotalo/ads-client/discussions" class="tsd-nav-link">Discussion &amp; Support</a><a href="https://github.com/jisotalo/ads-client/" class="tsd-nav-link">GitHub</a><a href="https://www.npmjs.com/package/ads-client/" class="tsd-nav-link">NPM</a></nav><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>ads-client | Beckhoff TwinCAT ADS client library for Node.js</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
